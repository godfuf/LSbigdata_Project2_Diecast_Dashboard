▶️ [Shiny 대시보드 바로가기](https://nueos.shinyapps.io/pjt05/)

# 🏭 다이캐스팅 품질 예측 및 실시간 모니터링 시스템

---

## 📌 프로젝트 개요

본 프로젝트는 **다이캐스팅 공정 데이터를 활용하여**,

* 머신러닝 기반 품질 예측 모델링 및 불량품 사전 감지
* 실시간 공정 모니터링 및 SHAP 기반 영향요인 분석  
* 이상치 탐지를 통한 공정 이상 상황 감지 및 알림
* 과거 품질 데이터 분석 및 자동 보고서 생성

기능을 통합한 **종합 품질 관리 시스템 대시보드**입니다.

예상 사용자는 **품질관리팀, 생산 관리자 및 경영진**으로, 제품 품질 향상 및 불량률 최소화라는 목적을 달성할 수 있습니다.

---

## 🚀 주요 기능

| 기능 영역 | 설명 |
| ----------- | ------------------------------------- |
| 🤖 AI 품질 예측 | 금형별 맞춤 머신러닝 모델을 통한 불량품 사전 감지 |
| ⚡ 실시간 모니터링 | 공정 데이터 실시간 추적 및 SHAP 기반 영향요인 분석 |
| 🔍 이상치 탐지 | Isolation Forest 기반 공정 이상 상황 감지 및 알림 |
| 📊 과거 분석 | 월별/일별 품질 데이터 분석 및 시각화 |
| 📋 자동 보고서 | PDF 형태 품질 분석 보고서 자동 생성 |
| 🎛️ 사용자 정의 예측 | 공정 조건 시뮬레이션 및 품질 예측 |

---

## 🧰 기술 스택

| 분야 | 사용 기술 |
| ----- | ------------------------------------------------------------ |
| 언어 | Python |
| 프레임워크 | [Shiny for Python](https://shiny.posit.co/py/) |
| 시각화 | Plotly, Matplotlib, Seaborn |
| 머신러닝 | XGBoost, LightGBM |
| 이상치 탐지 | Isolation Forest |
| 설명가능 AI | SHAP |
| 문서 생성 | matplotlib PDF, ReportLab |
| 배포 | shinyapps.io |

---

## 📈 데이터 설명

### 🗂️ 데이터 출처
**실제 다이캐스팅 공정 센서 데이터**: 73,612개 학습 샘플, 18,403개 테스트 샘플

### 📊 학습 데이터 (train.csv)

| 컬럼명 | 설명 | 자료형 |
| ------ | ---- | ------ |
| id | 각 측정값의 고유 식별자 | int64 |
| working | 가동 여부 | object |
| molten_temp | 용탕 온도 (°C) | float64 |
| facility_operation_cycleTime | 설비 작동 사이클 시간 | int64 |
| production_cycletime | 제품 생산 사이클 시간 | int64 |
| low_section_speed | 저속 구간 속도 | float64 |
| high_section_speed | 고속 구간 속도 | float64 |
| cast_pressure | 주조 압력 | float64 |
| biscuit_thickness | 비스킷 두께 | float64 |
| upper_mold_temp1~3 | 상금형 온도1~3 | float64 |
| lower_mold_temp1~3 | 하금형 온도1~3 | float64 |
| sleeve_temperature | 슬리브 온도 | float64 |
| physical_strength | 형체력 | float64 |
| Coolant_temperature | 냉각수 온도 | float64 |
| mold_code | 금형 코드 (8412, 8573, 8600, 8722, 8917) | int64 |
| **passorfail** | **품질 판정 (0: 양품, 1: 불량)** | float64 |

### 🎯 예측 데이터 (test.csv)

동일한 센서 변수들로 구성되어 있으며, passorfail 컬럼이 없는 예측 대상 데이터

---

## 🔧 모델 개발 과정

### 📍 A. 불량/양품 분류 모델 개발

#### 1단계: 금형별 최적 모델 선정
* **모델 후보**: RandomForest, XGBoost
* **모델 선정**: 각 금형별 최고 성능 모델 선별
  - 8412, 8573, 8722: XGBoost_Balanced
  - 8600, 8917: LightGBM_Balanced
* **특징**: 
  - 데이터 누출 방지 (분할 → 전처리 → 튜닝)
  - tryshot_signal 비즈니스 룰 적용
  - EMS_operation_time 제거로 안정성 확보

#### 2단계: 과적합 방지 강화
* **개선사항**:
  - 정규화 파라미터 추가 (L1, L2 정규화)
  - 엄격한 Early Stopping (10)
  - 임계값 0.5~0.8 범위로 보수적 설정
  - 정밀도 70% 하한선 적용
* **최적화 전략**: 민감도 × 정밀도 균형점 최대화
* **결과**: 과도한 불량 예측 방지 및 일반화 성능 향상

### 📍 B. 이상치 탐지 모델 개발

#### 데이터 전처리
* **결측치 처리**: KNN Imputer를 활용한 온도 변수 보간
* **이상치 제거**: 물리적으로 불가능한 극단값 제거
  - low_section_speed 65535값 제거
  - biscuit_thickness 420, 422값 제거
  - 온도 센서 이상값 제거 (1449, 4232, 65503 등)
* **변수 변환**: 몰드 코드 원핫 인코딩

#### 이상치 탐지 모델
* **알고리즘**: Isolation Forest
* **contamination**: 0.06 (실제 불량률 4.4% + 여유분)
* **n_estimators**: 150
* **검증**: PCA 2차원 시각화를 통한 이상치 분포 확인
* **정상 패턴**: 몰드별 양품 데이터 기반 기준값 설정

---

## 📊 시스템 구성

### ① 실시간 모니터링 대시보드 (app.py)
* **기능**: 
  - 실시간 품질 예측 및 모니터링
  - SHAP 기반 영향요인 분석
  - 이상치 탐지 알림 시스템
  - 센서 데이터 시계열 추적
* **기술**: Shiny for Python, Plotly 실시간 차트

### ② 통계 분석 페이지
* **기능**:
  - 불량률 추이 분석
  - 관리도 기반 공정 안정성 모니터링
  - 엑셀 형태 불량 로그 다운로드
* **시각화**: 시계열 트렌드, 박스플롯, 히스토그램

### ③ 사용자 정의 예측 시스템
* **기능**:
  - 16개 공정 변수 실시간 조정
  - 불량 범위 시각화 (이진 탐색 기반)
  - SHAP 변수 기여도 분석
  - PDP(Partial Dependence Plot) 민감도 분석
  - PDF 보고서 자동 생성

---

## 👥 프로젝트 구성원
* 홍주형, 박소은, 신지원, 양현준, 정의주
